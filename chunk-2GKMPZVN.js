import{a as B}from"./chunk-QWD3OZDZ.js";import"./chunk-QMRGOXNO.js";import{$a as M,Ca as I,Ea as w,Ja as v,Jb as P,Ka as m,Kb as z,Ma as E,Mb as L,Ob as Q,Ra as c,Sa as u,T as D,Ta as V,Tb as j,Ua as b,Ub as W,Va as y,Wa as h,Xa as C,Ya as f,Yb as A,Z as x,Za as R,_,_a as H,bb as S,db as O,ua as p}from"./chunk-3K5HHCUF.js";var F=["myTable"];function Y(i,g){if(i&1){let t=b();c(0,"div",13)(1,"a",14),y("click",function(){let o=x(t).group,e=h();return _(e.toggleExpandGroup(o))}),c(2,"b"),S(3),u()()()}if(i&2){let t=g.group,a=g.expanded;p(),E("datatable-icon-right",!a)("datatable-icon-down",a),p(2),O("Age: ",t?t.value[0].age:"","")}}function q(i,g){if(i&1){let t=b();c(0,"label",15)(1,"input",16),y("change",function(o){let e=x(t),r=e.rowIndex,l=e.row,s=e.group,n=h();return _(n.checkGroup(o,l,r,s))}),u()(),c(2,"label",15)(3,"input",17),y("change",function(o){let e=x(t),r=e.rowIndex,l=e.row,s=e.group,n=h();return _(n.checkGroup(o,l,r,s))}),u()(),c(4,"label",15)(5,"input",18),y("change",function(o){let e=x(t),r=e.rowIndex,l=e.row,s=e.group,n=h();return _(n.checkGroup(o,l,r,s))}),u()()}if(i&2){let t=g.rowIndex,a=g.row;f("for","ep1",t,""),p(),f("id","ep1",t,""),C("name",t),m("checked",a.exppayyes===1),v("aria-label","ex pay1"+t),p(),f("for","ep2",t,""),p(),f("id","ep2",t,""),C("name",t),m("checked",a.exppayno===1),v("aria-label","ex pay2"+t),p(),f("for","ep3",t,""),p(),f("id","ep3",t,""),C("name",t),m("checked",a.exppaypending===1),v("aria-label","ex pay3"+t)}}function N(i,g){if(i&1){let t=b();c(0,"input",19),y("blur",function(o){let e=x(t).rowIndex,r=h();return _(r.updateValue(o,"comment",e))}),u()}if(i&2){let t=g.value;m("value",t)}}var ee=(()=>{class i{constructor(){this.editing={},this.rows=[],this.ColumnMode=j,this.SelectionType=W,this.dataService=D(B),this.dataService.load("forRowGrouping.json").subscribe(t=>{this.rows=t})}checkGroup(t,a,o,e){let r="Pending",l=!0,s=t.target;if(a.exppayyes=0,a.exppayno=0,a.exppaypending=0,s.checked&&(s.value==="0"?a.exppayyes=1:s.value==="1"?a.exppayno=1:s.value==="2"&&(a.exppaypending=1)),e.length===2){if(["Calculated","Funder"].indexOf(e[0].source)>-1&&["Calculated","Funder"].indexOf(e[1].source)>-1&&e[0].startdate===e[1].startdate&&e[0].enddate===e[1].enddate)for(let n=0;n<e.length;n++)e[n].source!==a.source&&s.value==="0"&&(e[n].exppayyes=0,e[n].exppaypending=0,e[n].exppayno=1),e[n].exppayyes===0&&e[n].exppayno===0&&e[n].exppaypending===0&&(l=!1),console.log("expectedPaymentDealtWith",l)}else for(let n=0;n<e.length;n++)e[n].exppayyes===0&&e[n].exppayno===0&&e[n].exppaypending===0&&(l=!1),console.log("expectedPaymentDealtWith",l);if(e.filter(n=>n.exppaypending===1).length===0&&e.filter(n=>n.exppaypending===0&&n.exppayyes===0&&n.exppayno===0).length===0){console.log("expected payment dealt with");let n=e.filter(d=>d.exppayyes===1).length,G=e.filter(d=>d.exppayyes===1&&d.source==="Funder").length,k=e.filter(d=>d.exppayyes===1&&d.source==="Calculated").length,T=e.filter(d=>d.exppayyes===1&&d.source==="Manual").length;console.log("numberOfExpPayYes",n),console.log("numberOfSourceFunder",G),console.log("numberOfSourceCalculated",k),console.log("numberOfSourceManual",T),n>0&&(n===G?r="Funder Selected":n===k?r="Calculated Selected":n===T?r="Manual Selected":r="Hybrid Selected")}e[0].groupstatus=r}updateValue(t,a,o){this.editing[o+"-"+a]=!1,this.rows[o][a]=t.target.value,this.rows=[...this.rows]}toggleExpandGroup(t){console.log("Toggled Expand Group!",t),this.table.groupHeader.toggleExpandGroup(t)}onDetailToggle(t){console.log("Detail Toggled",t)}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=I({type:i,selectors:[["row-grouping-demo"]],viewQuery:function(a,o){if(a&1&&R(F,5),a&2){let e;H(e=M())&&(o.table=e.first)}},decls:19,vars:17,consts:[["myTable",""],["myGroupHeader",""],["href","https://github.com/siemens/ngx-datatable/blob/master/src/app/basic/row-grouping.component.ts","target","_blank"],[1,"material","expandable",3,"rows","groupRowsBy","columnMode","scrollbarH","headerHeight","footerHeight","rowHeight","limit","groupExpansionDefault","selectionType"],[3,"toggle","rowHeight","checkboxable"],["ngx-datatable-group-header-template",""],["name","Exp. Pay.","prop","","editable","true",3,"headerCheckboxable","checkboxable","frozenLeft","sortable"],["ngx-datatable-cell-template",""],["name","Source","prop","source","editable","false",3,"frozenLeft"],["name","Name","prop","name","editable","true"],["name","Gender","prop","gender"],["name","Age","prop","age"],["name","Comment","prop","comment"],[2,"padding-left","5px","height","100%","display","flex","align-items","center"],["href","javascript:void(0)","title","Expand/Collapse Group",3,"click"],[1,"datatable-checkbox",3,"for"],["type","checkbox","value","0",1,"expectedpayment",3,"change","id","name","checked"],["type","checkbox","value","1",1,"expectedpayment2",3,"change","id","name","checked"],["type","checkbox","value","2",1,"expectedpayment3",3,"change","id","name","checked"],["type","text","name","comment","aria-label","comment",3,"blur","value"]],template:function(a,o){if(a&1){let e=b();c(0,"div")(1,"h3"),S(2," Row Grouping "),c(3,"small")(4,"a",2),S(5," Source "),u()()(),c(6,"ngx-datatable",3,0)(8,"ngx-datatable-group-header",4,1),y("toggle",function(l){return x(e),_(o.onDetailToggle(l))}),w(10,Y,4,5,"ng-template",5),u(),c(11,"ngx-datatable-column",6),w(12,q,6,21,"ng-template",7),u(),V(13,"ngx-datatable-column",8)(14,"ngx-datatable-column",9)(15,"ngx-datatable-column",10)(16,"ngx-datatable-column",11),c(17,"ngx-datatable-column",12),w(18,N,1,1,"ng-template",7),u()()()}a&2&&(p(6),m("rows",o.rows)("groupRowsBy","age")("columnMode",o.ColumnMode.force)("scrollbarH",!0)("headerHeight",50)("footerHeight",50)("rowHeight",40)("limit",4)("groupExpansionDefault",!0)("selectionType",o.SelectionType.checkbox),p(2),m("rowHeight",34)("checkboxable",!0),p(3),m("headerCheckboxable",!0)("checkboxable",!0)("frozenLeft",!0)("sortable",!1),p(2),m("frozenLeft",!0))},dependencies:[A,z,P,Q,L],encapsulation:2})}}return i})();export{ee as RowGroupingComponent};
