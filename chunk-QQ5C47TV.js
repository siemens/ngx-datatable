import{a as l}from"./chunk-E67PIZ4Z.js";import"./chunk-NKJLIICL.js";import{Ca as p,Ka as d,Ra as s,Sa as g,Tb as S,Va as f,Yb as P,bb as a,gb as b,hb as r,jb as v,ua as u,ya as h}from"./chunk-3K5HHCUF.js";var _=()=>({name:"Name",sortable:!1}),z=()=>({name:"Gender",sortable:!1}),C=()=>({name:"Company",sortable:!1}),M=(i,w,t)=>[i,w,t],L=(()=>{class i{constructor(t){this.serverResultsService=t,this.totalElements=0,this.cache={},this.cachePageSize=0,this.ColumnMode=S,this.isLoading=0,this.pageNumber=0}setPage(t){this.pageNumber=t.offset;let o=t.offset*t.pageSize,e={pageNumber:Math.floor(o/t.pageSize),size:t.pageSize,totalElements:0,totalPages:0};this.cachePageSize!==e.size&&(this.cachePageSize=e.size,this.cache={}),!this.cache[e.pageNumber]&&(this.cache[e.pageNumber]=!0,this.isLoading++,this.serverResultsService.getResults(e).subscribe(n=>{this.totalElements=n.page.totalElements,this.rows||(this.rows=new Array(this.totalElements||0));let c=n.page.pageNumber*n.page.size,m=[...this.rows];m.splice(c,n.page.size,...n.data),this.rows=m,this.isLoading--}))}static{this.\u0275fac=function(o){return new(o||i)(h(l))}}static{this.\u0275cmp=p({type:i,selectors:[["virtual-paging-demo"]],features:[b([l])],decls:9,vars:20,consts:[["href","https://github.com/siemens/ngx-datatable/blob/master/src/app/paging/paging-virtual.component.ts","target","_blank"],[1,"material",3,"page","rows","columns","columnMode","headerHeight","loadingIndicator","ghostLoadingIndicator","scrollbarV","footerHeight","rowHeight","externalPaging","externalSorting","count","offset"],["loading-indicator","",1,"custom-loading-indicator"]],template:function(o,e){o&1&&(s(0,"div")(1,"h3"),a(2," Virtual Server-side Paging "),s(3,"small")(4,"a",0),a(5," Source "),g()()(),s(6,"ngx-datatable",1),f("page",function(c){return e.setPage(c)}),s(7,"div",2),a(8,"loading..."),g()()()),o&2&&(u(6),d("rows",e.rows)("columns",v(16,M,r(13,_),r(14,z),r(15,C)))("columnMode",e.ColumnMode.force)("headerHeight",50)("loadingIndicator",e.isLoading>0)("ghostLoadingIndicator",e.isLoading>0)("scrollbarV",!0)("footerHeight",50)("rowHeight",50)("externalPaging",!0)("externalSorting",!0)("count",e.totalElements)("offset",e.pageNumber))},dependencies:[P],styles:[".custom-loading-indicator[_ngcontent-%COMP%]{position:sticky;top:0;height:50px;text-align:center}"]})}}return i})();export{L as VirtualPagingComponent};
